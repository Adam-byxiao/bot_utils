# KWS GUI 界面使用说明

## 概述

KWS GUI 是一个基于 wxPython 的图形化界面，用于可视化监控和分析语音唤醒词识别。该界面提供了直观的操作方式和实时的统计显示。

## 界面布局

### 左上部分 - 设备连接区域
- **IP地址**: 目标设备的IP地址
- **用户名**: SSH登录用户名
- **密码**: SSH登录密码

### 左下部分 - 实时统计区域
为每个提示词分别显示：
- **总识别次数**: 该提示词被识别的总次数
- **成功触发次数**: 成功触发唤醒的次数
- **触发率**: 成功触发的百分比
- **平均分数**: 识别分数的平均值

### 底部 - 控制按钮
- **开始监控**: 连接设备并开始实时监控
- **停止监控**: 停止监控并断开连接
- **导出数据**: 将监控数据导出为CSV文件

### 右侧 - 输出日志区域
- **模式选择**: 
  - **Standard模式**: 只显示识别次数和最终统计
  - **Debug模式**: 显示每次识别的详细信息
- **日志输出**: 实时显示监控状态和识别结果
- **清空日志**: 清空当前显示的日志内容

## 使用步骤

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动GUI
```bash
python KWS_GUI.py
```

### 3. 配置连接
1. 在左上角输入目标设备的连接信息：
   - IP地址（如：192.168.1.100）
   - 用户名（如：root）
   - 密码

### 4. 开始监控
1. 点击"开始监控"按钮
2. 系统会尝试连接设备
3. 连接成功后开始实时监控日志
4. 统计信息会实时更新

### 5. 查看结果
- **实时统计**: 在左下角查看各提示词的统计信息
- **日志输出**: 在右侧查看详细的监控日志
- **模式切换**: 可在Standard和Debug模式间切换

### 6. 导出数据
1. 点击"导出数据"按钮
2. 选择保存位置和文件名
3. 数据将以CSV格式保存，包含：
   - 时间戳
   - 提示词
   - 识别分数
   - 是否触发
   - 开始时间
   - 结束时间
   - 原始日志

## 功能特性

### 实时监控
- 通过SSH连接实时获取设备日志
- 自动解析KWS识别结果
- 实时更新统计信息

### 智能统计
- 按提示词分类统计
- 计算触发率和平均分数
- 提供详细的统计报告

### 灵活输出
- Standard模式：简洁的进度显示
- Debug模式：详细的识别信息
- 可清空和导出日志

### 数据导出
- CSV格式导出
- 包含完整的识别记录
- 便于后续分析

## 配置说明

### 默认提示词
当前支持的提示词：
- hello_vibe
- hey_vibe

可以通过修改 `KWSStatsPanel` 类中的 `phrases` 列表来自定义提示词。

### 连接参数
- **超时时间**: 默认30秒
- **重连机制**: 自动重连
- **日志命令**: `cat /var/log/vibe-ai/vibe-ai.LATEST`

## 故障排除

### 连接失败
1. 检查网络连接
2. 验证IP地址、用户名和密码
3. 确保SSH服务正常运行
4. 检查防火墙设置

### 无法识别日志
1. 确认日志文件路径正确
2. 检查日志格式是否匹配
3. 验证设备上的KWS服务状态

### GUI无法启动
1. 确认wxPython已正确安装
2. 检查Python版本兼容性
3. 查看错误日志信息

## 性能优化

### 内存使用
- 定期清空日志显示
- 限制记录数量
- 及时导出数据

### 网络优化
- 使用稳定的网络连接
- 适当调整超时参数
- 监控网络延迟

## 扩展功能

### 自定义提示词
修改 `KWSStatsPanel.__init__` 方法中的提示词列表：
```python
phrases = ["your_custom_phrase1", "your_custom_phrase2"]
```

### 自定义日志解析
修改 `KWSLogParser` 类的解析规则以适应不同的日志格式。

### 添加新的统计指标
在 `KWSStatsPanel` 类中添加新的统计字段和计算逻辑。

## 技术架构

### 主要组件
- **KWSMainFrame**: 主窗口框架
- **KWSStatsPanel**: 统计显示面板
- **KWSOutputPanel**: 日志输出面板
- **KWSCalculator**: 后端计算引擎

### 线程模型
- **主线程**: GUI界面更新
- **监控线程**: SSH连接和日志监控
- **线程安全**: 使用wx.CallAfter确保线程安全

### 数据流
1. SSH连接获取日志
2. 解析识别结果
3. 更新统计信息
4. 刷新GUI显示
5. 记录数据用于导出

## 许可证

本工具遵循项目整体许可证。

## 更新日志

### v1.0.0
- 初始版本发布
- 基本的GUI界面
- 实时监控功能
- 统计和导出功能

## 支持

如有问题或建议，请参考主项目的支持渠道。