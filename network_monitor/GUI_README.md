# 语音代理监控GUI使用说明

## 功能概述

这个GUI应用程序提供了一个可视化界面来监控语音代理的对话过程，可以实时显示输入和输出的transcript，并将对话内容导出到本地文件。

## 主要功能

1. **连接管理**: 连接到Chrome DevTools进行监控
2. **实时监控**: 实时显示对话内容（输入/输出）
3. **统计信息**: 显示消息数量统计
4. **文件导出**: 将对话内容导出为简单文本格式
5. **自动清理**: 自动删除中间临时文件

## 使用步骤

### 1. 环境准备

确保已安装所需依赖：
```bash
pip install -r requirements.txt
```

### 2. 设置Chrome调试环境

1. 建立SSH端口转发（如果需要）：
   ```bash
   ssh root@device_ip -L 9222:localhost:9222
   ```

2. 启动Chrome调试模式：
   ```bash
   chrome --remote-debugging-port=9222
   ```

3. 在Chrome中打开 `chrome://inspect`，找到Bot Controller页面并打开DevTools

### 3. 启动GUI应用程序

```bash
python run_voice_monitor_gui.py
```

### 4. 使用GUI

1. **连接**: 点击"连接"按钮连接到Chrome DevTools
2. **开始监控**: 连接成功后，点击"开始监控"开始实时监控
3. **查看对话**: 在对话显示区域查看实时的输入/输出内容
4. **导出对话**: 点击"导出对话"将当前对话保存到本地文件
5. **停止监控**: 点击"停止监控"结束监控
6. **清空显示**: 点击"清空显示"清除当前显示的内容

## 界面说明

- **连接状态**: 显示当前连接状态（已连接/未连接）
- **监控状态**: 显示当前监控状态（监控中/已停止）
- **统计信息**: 显示输入/输出消息数量
- **对话显示区**: 实时显示对话内容，格式为：
  ```
  [时间] [角色] [类型]: 内容
  ```

## 输出文件格式

导出的对话文件采用简单的文本格式：
```
语音代理对话记录
导出时间: YYYY-MM-DD HH:MM:SS
总消息数: X

[时间戳] 用户输入: 用户说的话
[时间戳] 助手输出: 助手的回复
...
```

## 注意事项

1. 确保Chrome DevTools已正确连接到Bot Controller页面
2. 监控过程中请保持Chrome页面活跃状态
3. 导出的文件会保存在 `voice_output` 目录下
4. 程序会自动清理临时文件，无需手动删除
5. 如果遇到连接问题，请检查端口转发和Chrome调试设置

## 故障排除

- **连接失败**: 检查Chrome是否启动调试模式，端口9222是否可用
- **无法获取数据**: 确保在正确的页面打开了DevTools
- **GUI无法启动**: 检查wxPython是否正确安装